<!DOCTYPE HTML>
<html>

<head>
  <title>Neurite</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="./styles_v1.css">
  <meta charset="UTF-8">
  <meta name="description"
    content="Fractal Graph-of-Thought. Experimental Mind-Mapping for Ai-Agents, Web-Links, Notes, and Code.">

  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.9.179/build/pdf.min.js"></script>

  <!-- Core -->
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.css">

  <!-- Add-Ons -->
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/scroll/simplescrollbars.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/mode/overlay.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/mode/loadmode.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/runmode/runmode.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/show-hint.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/anyword-hint.js"></script>

  <!-- Modes -->
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/meta.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.3/mode/htmlmixed/htmlmixed.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/xml/xml.js"></script> <!-- for HTML -->
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/javascript/javascript.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/css/css.js"></script> <!-- for CSS -->
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/python/python.js"></script> <!-- for Python -->
  <!--Themes-->
  <!-- Custom Scrollbars -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/addon/scroll/simplescrollbars.css">

  <!-- show-hint-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/addon/hint/show-hint.css">


  <!--Prism.js-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>-->
  <!-- Pyodide -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js"></script>

</head>

<body id="body">

  <!-- filters -->
  <!-- filters <div id="filter-overlay"></div>-->
  <div id="invert-filter"></div>



  <!-- View Matrix -->

  <div ondragover="dragOverHandler(event);" ondrop="dropHandler(event);" style="width: 100%; height: 100%;">
    <svg id="svg_bg" viewBox="-128 -128 256 256">
      <g id="viewmatrix">
        <g id="bg" />
        <path id="mousePath" d="" fill="none" stroke="rgb(50 51 62 / 80%)" stroke-width="0.01" />
        <g id="edges" />
        <g id="sensorData" />
        <g id="placementPreview" />
      </g>
    </svg>
  </div>

  <svg id="debug_layer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"
    style="position: absolute; left:0px; top:0px; display:none; visibility:hidden; width: 100%; height: 100vh;">
    <style type="text/css">
      .white {
        font: 12px sans-serif;
        fill: white;
      }
    </style>
    <text x="0" y="0" class="white">fps:</text>
  </svg>

  <!-- Modals -->
  <div id="customModal" class="modal">
    <div class="modal-content">
      <div class="modal-header" id="modal-header">
        <h2 class="modal-title"></h2>
        <span class="close">&times;</span>
      </div>
      <div class="modal-body"></div>
    </div>
  </div>

  <div id="zetSearchModal" style="display: none;">
    <div style="display: flex; align-items: center; margin-bottom: 10px;">
      <!-- Added margin for spacing -->
      <input id="Searchbar" class="Searchbar" placeholder="search notes..."
        onkeydown="if(event.key === 'Enter') event.preventDefault();" />
    </div>
    <div id="search-results" class="custom-scrollbar">
      <div class="results-display-div"></div>
    </div>
  </div>

  <div id="noteModal" style="display: none;">
    <!-- Content for the note modal -->
    <div style="display: flex; flex-direction: column; align-items: center;">
      <div style="padding-bottom: 20px;">
        <label for="node-tag">Node Tag:</label>
        <input type="text" id="node-tag" value="##" style="width:80px;" />
      </div>
      <div>
        <label for="node-tag">Link Tag:</label>
        <input type="text" id="ref-tag" value="[[" style="width:80px;" />
      </div>
    </div>
    <br />
    <div style="display: flex; justify-content: space-evenly; align-items: center;">
      <label for="zetPathTypeDropdown" style="margin-right: 10px;">Placement Style</label>
      <div class="dropdown-container" title="Determine what path the Zettelkasten decides to place nodes on.">
        <select id="zetPathTypeDropdown" class="model-selector custom-select ignoreSetup">
          <option value="Radial">Radial</option>
          <option value="Spiral">Spiral</option>
          <option value="Branching">Branching</option>
          <option value="Random">Random</option>
        </select>
      </div>
    </div>
    <br />
    <div class="gridLayout">

      <!-- Node Count Slider : For Radial-->
      <div class="settingsSlider radial-slider" title="Defines the number of steps or nodes in the path.">
        <label for="radialPathLengthSlider">Number of Nodes</label>
        <input type="range" id="radialPathLengthSlider" name="radial-path-length-slider" min="1" max="64" step="1">
      </div>
      <!-- Distance Slider: : For Radial-->
      <div class="settingsSlider radial-slider"
        title="Sets the general spacing between nodes, affecting how spread out the path is.">
        <label for="radialPathDistanceSlider">Node Spacing</label>
        <input type="range" id="radialPathDistanceSlider" name="radial-path-distance-slider" min="0.1" max="8"
          step="0.1">
      </div>
      <!-- Scale Slider : For Radial-->
      <div class="settingsSlider radial-slider"
        title="Adjusts the size of each node. Affects how large or small nodes appear.">
        <label for="radialScaleSlider">Node Size</label>
        <input type="range" id="radialScaleSlider" name="radial-scale-slider" min="0.1" max="2" step="0.01">
      </div>
      <!-- Radial Branch Depth Slider: For Radial -->
      <div class="settingsSlider radial-slider" title="Sets the starting radius from the center for the first node.">
        <label for="radialDepthSlider">Number of Radii</label>
        <input type="range" id="radialDepthSlider" name="radial-depth-slider" min="1" max="32" step="1">
      </div>

      <!-- Node Count Slider : For Spiral-->
      <div class="settingsSlider spiral-slider" title="Defines the number of steps or nodes in the path.">
        <label for="spiralPathLengthSlider">Number of Nodes</label>
        <input type="range" id="spiralPathLengthSlider" name="spiral-path-length-slider" min="1" max="100" step="1">
      </div>
      <!-- Distance Slider: : For Spiral-->
      <div class="settingsSlider spiral-slider"
        title="Sets the general spacing between nodes, affecting how spread out the path is.">
        <label for="spiralPathDistanceSlider">Node Spacing</label>
        <input type="range" id="spiralPathDistanceSlider" name="spiral-path-distance-slider" min="0.1" max="4"
          step="0.1">
      </div>
      <!-- Scale Slider : For Spiral-->
      <div class="settingsSlider spiral-slider"
        title="Adjusts the size of each node. Affects how large or small nodes appear.">
        <label for="spiralScaleSlider">Node Size</label>
        <input type="range" id="spiralScaleSlider" name="spiral-scale-slider" min="0.1" max="2" step="0.01">
      </div>
      <!-- Curl Slider: For Spiral -->
      <div class="settingsSlider spiral-slider"
        title="Adjusts the curl of the spiral. Negative values create counterclockwise spirals, while positive values create clockwise spirals.">
        <label for="curlSlider">Curl</label>
        <input type="range" id="curlSlider" name="curl-slider" min="-1" max="1" step="0.01">
      </div>



      <!-- Node Count Slider : For Branching-->
      <div class="settingsSlider branching-slider" title="Defines the number of steps or nodes in the path.">
        <label for="branchingPathLengthSlider">Number of Nodes</label>
        <input type="range" id="branchingPathLengthSlider" name="branching-path-length-slider" min="1" max="100"
          value="64" step="1">
      </div>
      <!-- Distance Slider: : For Branching-->
      <div class="settingsSlider branching-slider"
        title="Sets the general spacing between nodes, affecting how spread out the path is.">
        <label for="pathDistanceSlider">Node Spacing</label>
        <input type="range" id="branchingPathDistanceSlider" name="path-distance-slider" min="0.1" max="4" value="1"
          step="0.1">
      </div>
      <!-- Scale Slider : For Branching-->
      <div class="settingsSlider branching-slider"
        title="Adjusts the size of each node. Affects how large or small nodes appear.">
        <label for="branchingScaleSlider">Node Size</label>
        <input type="range" id="branchingScaleSlider" name="branching-scale-slider" min="0.1" max="2" value="0.98"
          step="0.01">
      </div>
      <!-- Branching Factor Slider: For Branching -->
      <div class="settingsSlider branching-slider" title="Controls the number of branches emanating from each node.">
        <label for="branchingFactorSlider">Branching Factor</label>
        <input type="range" id="branchingFactorSlider" name="branching-factor-slider" min="2" max="12" value="4"
          step="1">
      </div>
    </div>
  </div>

  <div id="apiConfigModalContent" style="display: none;">
    <div class="api-modal-content">
      <label for="apiEndpoint">API Endpoint:</label>
      <input type="text" id="apiEndpoint" class="api-modal-input" placeholder="Enter API Endpoint URL">

      <label for="apiEndpointKey">API Key (Optional):</label>
      <input type="text" id="apiEndpointKey" class="api-modal-input" placeholder="Enter API Key">

      <label for="apiModelName">Model Name:</label>
      <input type="text" id="apiModelName" class="api-modal-input" placeholder="Enter Model Name">

      <button class="api-modal-button" onclick="saveApiConfig()">Save Configuration</button>
    </div>
  </div>

  <div id="aiModal" style="display: none;">
    <div class="checkboxarray">
      <input type="checkbox" id="forget-checkbox" name="forget-checkbox">
      <label for="forget-checkbox"><strong>Selective Forgetting </strong></label>
      <input type="checkbox" id="novelty-checkbox">
      <label for="novelty-checkbox"><strong>Shuffle Wiki Results</strong></label>
      <input type="checkbox" id="use-all-connected-ai-nodes" />
      <label for="use-all-connected-ai-nodes"><strong>Message All Connected Ai</strong></label>
      <input type="checkbox" id="ai-nodes-checkbox">
      <label for="ai-nodes-checkbox"><strong>AI Generated AI Nodes</strong></label>
    </div>
  </div>

  <div id="importLinkModalContent" style="display: none;">
    <div class="import-modal-content">
      <div>
        <label for="importLinkTextarea">Text:</label>
        <br />
        <textarea id="importLinkTextarea" class="custom-scrollbar importLinkTextarea" rows="10"></textarea>
      </div>

      <div>
        <label for="maxSentencesPerNote">Note Length:</label>
        <input type="range" id="maxSentencesPerNote" value="5" min="1" max="20">
      </div>

      <div>
        <input type="checkbox" id="connectNotes">
        <label for="connectNotes">Connect</label>
      </div>


      <button class="api-modal-button" onclick="confirmImport()">Confirm Import</button>
    </div>
  </div>

  <div id="nodeConnectionModal" style="display:none;">
    <input type="text" id="connectModalSearchBar" placeholder="search notes...">
    <ul id="nodeList" class="custom-scrollbar"></ul>
  </div>

  <div id="ollamaManagerModal" style="display: none;">
    <div id="ollamaModelList" class="custom-scrollbar"></div>
  </div>

  <div id="vectorDbModal" style="display: none;">
    <div id="key-list" class="scrollable-list" title="Embedded Documents">
      <!-- Stored keys will be dynamically added here -->
    </div>
    <div style="display: flex; justify-content: space-between;">
      <button id="chunkAndStoreButton" class="linkbuttons" title="Send Text to Embeddings Database">Upload File</button>
      <button id="delete-vectordb-docs" class="linkbuttons" title="Delete Document from Embeddings Database">Delete
        File(s)</button>
    </div>
    <input type="file" id="fileInput" style="display: none;" />
  </div>

  <div id="vectorDbImportConfirmModal" style="display: none;">
    <div class="gridLayout">
      <div class="raw-text">
        <h3>Raw Text</h3>
        <textarea id="rawTextArea" class="custom-scrollbar" rows="20" cols="50"></textarea>
      </div>
      <div class="chunked-text">
        <h3>Chunked Text</h3>
        <div id="chunkedTextDisplay" class="scrollable-list"></div>
      </div>
    </div>
    <div class="gridLayout" style="padding-top: 8px; padding-bottom: 6px;">
      <div class="settingsSlider" title="Size of Document Snippets (Set Before Embedding">
        <label for="maxChunkSizeSlider">Chunk Size: <span id="maxChunkSizeValue"></span></label>
        <input type="range" min="50" max="4096" value="1024" class="slider" id="maxChunkSizeSlider">
      </div>
      <div class="settingsSlider" title="Overlap Between Document Snippets (Set Before Embedding)">
        <label for="overlapSizeSlider">Overlap: <span id="overlapSizeDisplay"></span></label>
        <input type="range" id="overlapSizeSlider" name="overlapSize" min="0" max="100" value="10">
      </div>
    </div>
    <button id="confirmChunkAndStoreButton" class="api-modal-button">Confirm and Store</button>
    <button id="cancelChunkAndStoreButton" class="api-modal-button">Cancel</button>
  </div>

  <div id="vectorDbSearchModal" style="display: none;">
    <div class="search-container">
      <input type="text" id="vectorDbSearchInput" placeholder="Search...">
    </div>
    <div id="vectorDbSearchDisplay" class="vector-db-search-results custom-scrollbar">
      <!-- Search results will be dynamically added here -->
    </div>
    <div class="settingsSlider centered" style="margin-bottom: 10px;"
      title="Number of Embedded Document Snippets to Retrieve for AI Response">
      <label for="topN">Top <span id="topNValue">5</span> Results</label>
      <input type="range" id="topNSlider" name="topN" min="1" max="100" value="5">
    </div>
  </div>

  <div id="promptLibraryModalContent" style="display: none;">
    <div class="prompt-library-container">
      <div class="prompt-list-container">
        <div class="prompt-list custom-scrollbar"></div>
        <div class="prompt-list-buttons">
          <button class="add-prompt-button">+</button>
          <button class="delete-prompt-button">x</button>
        </div>
      </div>
      <div class="prompt-content">
        <textarea class="prompt-content-textarea custom-scrollbar"></textarea>
        <div class="prompt-buttons">
          <button class="set-instructions-button">Set Instructions</button>
        </div>
      </div>
    </div>
  </div>

  <div id="alertModal" style="display: none;">
    <!-- Content for the alert modal -->
    <p>This is an alert message.</p>
    <button>OK</button>
  </div>

  <!-- Dropdown -->

  <div class="dropdown" id="dropdowndiv">
    <div class="menu-button">
      <div class="menu-icon" id="menu-icon"></div>
    </div>

    <div class="node-panel">
      <div class="icon-row">
        <div class="icon-content">
          <div class="panel-icon edges-icon" title="Freeze and Connect Nodes (Hold Shift)">
            <svg class="w-[42px] h-[42px] text-gray-800 dark:text-white" style="transform: translateX(-1px);"
              aria-hidden="true">
              <use xlink:href="#edges-icon-symbol"></use>
            </svg>
          </div>
        </div>
        <div class="icon-content">
          <div class="panel-icon note-icon" title="Create Note (Shift + Double Click)">
            <svg class="w-[42px] h-[42px] text-gray-800 dark:text-white" aria-hidden="true">
              <use xlink:href="#note-icon-symbol"></use>
            </svg>
          </div>
        </div>
        <div class="icon-content">
          <div class="panel-icon ai-icon" title="Ai Note (ALT/Option + Double Click)">
            <svg class="w-[42px] h-[42px] text-gray-800 dark:text-white" aria-hidden="true">
              <use xlink:href="#ai-icon-symbol"></use>
            </svg>
          </div>
        </div>
        <div class="icon-content">
          <div class="panel-icon link-icon" title="Display Link">
            <svg class="w-[42px] h-[42px] text-gray-800 dark:text-white" aria-hidden="true">
              <use xlink:href="#link-icon-symbol"></use>
            </svg>
          </div>
        </div>
      </div>

      <!-- New container for the function call panel and its toggle button -->
      <div class="function-call-container">

        <!-- Sub-dropdown for function calls -->
        <div class="function-call-panel hidden">
          <!-- Function call list -->
          <div class="function-call-list custom-scrollbar">
            <!-- Function call items will be added here dynamically -->
          </div>

          <!-- Function prompt wrapper -->
          <div class="function-prompt-wrapper">
            <!-- Function prompt input -->
            <div style="display: flex;">
              <!-- Run function button -->
              <button id="function-run-button" class="function-button">
                <svg width="18" height="18">
                  <use xlink:href="#function-button"></use>
                </svg>
              </button>



              <div class="input-group" style="display: flex; position: relative; width: 60%;">
                <textarea id="function-prompt" class="custom-scrollbar function-prompt-textarea" rows="1"
                  oninput="autoGrow(event);" placeholder="Set Task..." required></textarea>

                <div class="status-icons-container"
                  style="position: absolute; right: 42px; top: 50%; transform: translateY(-50%);">
                  <!-- Status icons here -->
                  <div class="loader" id="functionLoadingIcon" style="display:none;"></div>

                  <div class="error-icon-css" id="functionErrorIcon" style="display:none;">
                    <div class="error-x-mark">
                      <span class="error-x-mark-left"></span>
                      <span class="error-x-mark-right"></span>
                    </div>
                  </div>
                </div>
              </div>

              <button id="function-send-button" class="function-button">
                <svg width="18" height="18" class="function-send-svg">
                  <use xlink:href="#play-icon"></use>
                </svg>
              </button>

              <!-- Regenerate button -->
              <button id="function-regen-button" class="function-button">
                <svg width="18" height="18">
                  <use xlink:href="#refresh-icon"></use>
                </svg>
              </button>
            </div>
          </div>

          <!-- CodeMirror container -->
          <div class="function-codemirror-container">
            <textarea id="neurite-function-cm"></textarea>
          </div>
        </div>
        <!-- Toggle button for function call panel -->
        <div class="toggle-panel" onclick="toggleFunctionCallPanel()">
          <div class="bar left-bar"></div>
          <div class="icon-wrapper">
            <!-- Wrapper for the icon only -->
            <div class="toggle-icon">
              <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="m1 1 4 4 4-4" />
              </svg>
            </div>
          </div>
          <div class="bar right-bar"></div>
        </div>
      </div>
    </div>

    <div class="dropdown-content">
      <div>
        <div class="tabs">
          <button class="tablink" onclick="openTab('tab1', this)">Notes</button>
          <button class="tablink" onclick="openTab('tab4', this)">Ai</button>
          <button class="tablink" onclick="openTab('tab2', this)">Fractal</button>
          <button class="tablink" onclick="openTab('tab6', this)">Networks</button>
          <button class="tablink" onclick="openTab('tab3', this)">?</button>
        </div>

        <div id="tab1" class="tabcontent">
          <!-- First tab content here -->
          <div class="submenu">
            <div id="zetHorizDragHandle" class="zet-drag-handle-horiz"></div>
            <div id="zetVertDragHandle" class="zet-drag-handle-vert"></div>
            <div id="zetPaneContainer" class="zet-pane-container">
              <div for="zetPaneContent" class="button-label">

                <div id="zetPaneHeader" class="zet-pane-header">
                  <button id="notesSearchButton" class="linkbuttons search-button"
                    title="Search Vector Embeddings Database">
                    <svg class="icon">
                      <use xlink:href="#searchSVG"></use>
                    </svg>
                  </button>
                  <select id="zetPaneDropdown" class="custom-select ignoreSetup"></select>
                  <button class="zet-add-pane-button linkbuttons search-button" title="Add a new Zettelkasten Panel">
                    <svg class="icon">
                      <use xlink:href="#plus-icon"></use>
                    </svg>
                  </button>
                  <button class="zet-delete-pane-button linkbuttons search-button" title="Delete Zettelkasten Panel">
                    <svg class="icon">
                      <use xlink:href="#delete-icon"></use>
                    </svg>
                  </button>
                </div>

              </div>

              <div id="zetPaneContent" class="zet-pane-content"></div>
            </div>
            <form id="prompt-form" onsubmit="sendMessage(event);">
              <!-- Second Row: Prompt Form -->
              <div style="display: flex; width: 100%; padding-top: 12px;">

                <!-- Textarea for main prompt -->
                <textarea id="prompt" class="custom-scrollbar" rows="1" oninput="autoGrow(event);"
                  placeholder="Enter prompt..." required></textarea>

                <!-- Status icons positioned similarly to function prompt -->
                <div class="status-icons-container" style="position: relative; right: 45px; top: 6px;">
                  <!-- Status icons (Loader and Error) -->
                  <div class="loader" id="aiLoadingIcon" style="display:none;"></div>
                  <div class="error-icon-css" id="aiErrorIcon" style="display:none;">
                    <div class="error-x-mark">
                      <span class="error-x-mark-left"></span>
                      <span class="error-x-mark-right"></span>
                    </div>
                  </div>
                </div>

                <!-- Run button (Play icon) -->
                <button type="submit">
                  <svg width="18" height="18">
                    <use xlink:href="#play-icon"></use>
                  </svg>
                </button>

                <!-- Regenerate button (Refresh icon) -->
                <button id="regen-button" type="button">
                  <svg width="18" height="18">
                    <use xlink:href="#refresh-icon"></use>
                  </svg>
                </button>
              </div>
            </form>
          </div>
        </div>
        <div id="tab4" class="tabcontent">
          <!-- Fourth tab content here -->
          <div class="submenu">
            <div class="label-bar-container">
              <label for="modelSelectContainer" class="button-label" onclick="toggleModelSelectPanel()">Select
                Ai</label>
              <div class="model-select-container" id="modelSelectContainer">
                <div class="model-select-panel hidden">
                  <br />
                  <div id="template-dropdowns" class="inference-template-wrapper">
                    <div class="dropdown-wrapper" id="wrapper-inference">
                      <label for="inference-select">Inference</label>
                      <div class="dropdown-container">
                        <select id="inference-select" class="model-selector custom-select">
                          <option value="OpenAi">OpenAi</option>
                          <option value="anthropic">Anthropic</option>
                          <option value="GROQ">Groq</option>
                          <option value="ollama">Ollama</option>
                          <option value="custom">Custom</option>
                        </select>
                      </div>
                    </div>
                    <br />
                    <div class="dropdown-wrapper" id="wrapper-openai">
                      <label for="open-ai-select">OpenAi</label>
                      <div class="dropdown-container">
                        <select id="open-ai-select" class="model-selector custom-select">
                          <option value="gpt-4o">GPT-4o</option>
                          <option value="gpt-4o-mini">GPT-4o-mini</option>
                          <option value="gpt-4">GPT-4</option>
                          <option value="gpt-4-vision-preview">GPT-4v</option>
                          <option value="gpt-3.5-turbo">GPT-3.5-turbo</option>
                        </select>
                      </div>
                    </div>
                    <div class="dropdown-wrapper" id="wrapper-anthropic">
                      <label for="anthropic-select">Claude</label>
                      <div class="dropdown-container">
                        <select id="anthropic-select" class="model-selector custom-select">
                          <option value="claude-3-5-sonnet-20240620">3.5 Sonnet</option>
                          <option value="claude-3-opus-20240229">3 Opus</option>
                          <option value="claude-3-sonnet-20240229">3 Sonnet</option>
                          <option value="claude-3-haiku-20240307">3 Haiku</option>
                        </select>
                      </div>
                    </div>
                    <div class="dropdown-wrapper" id="wrapper-groq">
                      <label for="groq-select">Groq</label>
                      <div class="dropdown-container">
                        <select id="groq-select" class="model-selector custom-select">
                          <option value="gemma-7b-it">Gemma-7b-it</option>
                          <option value="mixtral-8x7b-32768">Mixtral 8x7b 32k</option>
                          <option value="llama3-8b-8192">Llama3-8b</option>
                          <option value="llama3-70b-8192">Llama3-70b</option>
                        </select>
                      </div>
                    </div>
                    <div class="dropdown-wrapper" id="wrapper-ollama">
                      <label for="local-model-select">
                        <button id="openOllamaModalButton" class="linkbuttons">+ Ollama</button>
                      </label>
                      <div class="dropdown-container">
                        <select id="local-model-select" class="model-selector custom-select">
                          <option value="llama3">none</option>
                        </select>
                      </div>
                    </div>
                    <div class="dropdown-wrapper" id="wrapper-custom">
                      <label for="custom-model-select">
                        <button id="addApiConfigBtn" class="linkbuttons">+ Custom</button>
                        <button id="deleteApiConfigBtn" class="linkbuttons">-</button>
                      </label>
                      <div class="dropdown-container">
                        <select id="custom-model-select" class="model-selector custom-select">
                          <option value="none">none</option>
                          <!-- dynamic values -->
                        </select>
                      </div>
                    </div>


                  </div>
                </div>

                <div class="toggle-panel" onclick="toggleModelSelectPanel()" style="padding-top: 15px;">
                  <div class="bar left-bar"></div>
                  <div class="icon-wrapper">
                    <div class="toggle-icon">
                      <!-- Icon SVG -->
                      <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="bar right-bar"></div>
                </div>
              </div>
            </div>
            <br />
            <div class="label-bar-container">
              <label for="contextSettingsContainer" class="button-label" onclick="toggleContextSettingsPanel()">Context
                Settings</label>
              <div class="context-settings-container" id="contextSettingsContainer">
                <div class="context-settings-panel hidden">

                  <div class="dropdown-wrapper" id="wrapper-embeddings" style="margin-top: 10px; margin-bottom: 10px;">
                    <button id="vectorDbSearchButton" class="linkbuttons search-button"
                      title="Search Vector Embeddings Database">
                      <svg class="icon">
                        <use xlink:href="#searchSVG"></use>
                      </svg>
                    </button>
                    <button id="openVectorDbButton" class="linkbuttons search-button">Vector-DB</button>
                    <div class="dropdown-container">
                      <select id="embeddingsModelSelect" class="model-selector custom-select">
                        <option value="local-embeddings-gte-small">gte-small (in-browser)</option>
                        <option value="local-embeddings-all-MiniLM-L6-v2">all-MiniLM-L6-v2 (in-browser)</option>

                        <option value="text-embedding-3-small">ada-3-small</option>
                        <option value="text-embedding-3-large">ada-3-large</option>
                        <option value="text-embedding-ada-002">ada-2</option>

                        <option value="mxbai-embed-large">mxbai</option>
                        <option value="nomic-embed-text">nomic</option>
                        <option value="all-minilm">all-minilm</option>
                      </select>
                    </div>
                  </div>

                  <div class="checkboxarray">
                    <div title="Enable Web Search Results">
                      <input type="checkbox" id="google-search-checkbox" name="enable-search">
                      <label for="google-search-checkbox">Search</label>

                    </div>
                    <div title="Enable Code Instructions and Buttons">
                      <input type="checkbox" id="code-checkbox" name="code-checkbox">
                      <label for="code-checkbox">Code</label>
                    </div>
                    <div title="Self-Prompted AI">
                      <input type="checkbox" id="auto-mode-checkbox">
                      <label for="auto-mode-checkbox">Auto</label>
                    </div>
                    <div title="Retrieve Document Snippets and send to AI">
                      <input type="checkbox" id="embed-checkbox">
                      <label for="embed-checkbox">Data</label>
                    </div>
                    <div title="Query Wolfram Alpha">
                      <input type="checkbox" id="enable-wolfram-alpha" name="enable-wolfram-alpha">
                      <label for="enable-wolfram-alpha">Wolfram</label>
                    </div>
                    <div title="Query Wikipedia">
                      <input type="checkbox" id="wiki-checkbox">
                      <label for="wiki-checkbox">Wiki</label>


                    </div>
                  </div>
                  <div class="gridLayout" id="aiParameterGrid" style="padding-top: 15px;">
                    <div class="settingsSlider" title="Set the Token Limit for Calls to GPT">
                      <label for="max-tokens-slider">Max Tokens: <br /><span id="max-tokens-display">2000</span></label>
                      <input type="range" id="max-tokens-slider" name="max-tokens-slider" min="10" max="16000"
                        value="2000" step="1">
                    </div>

                    <div class="settingsSlider" title="Set the Tempurature for Calls to GPT">
                      <label id="model-temperature-label" for="model-temperature">Tempurature:<br /> 0.6</label>
                      <input type="range" id="model-temperature" name="model-temperature" min="0" max="1" step="0.1"
                        value="0.6">
                    </div>

                    <div class="settingsSlider" title="Set the Proportion of Tokens Dedicated to AI Memory">
                      <span id="max-context-size-display">2000</span>
                      <input type="range" id="max-context-size-slider" name="max-context-size-slider" min="0" max="2000"
                        value="555" step="1">
                    </div>

                    <div class="settingsSlider" title="Number of Notes Retrieved from Neurite and Sent to AI">
                      <label id="node-slider-label">Top 3 <br />nodes</label>
                      <input type="range" id="node-count-slider" name="node-count-slider" min="1" max="25" value="3">
                    </div>

                  </div>

                </div>
                <div class="toggle-panel" onclick="toggleContextSettingsPanel()" style="padding-top: 15px;">
                  <div class="bar left-bar"></div>
                  <div class="icon-wrapper">
                    <div class="toggle-icon">
                      <!-- Icon SVG -->
                      <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="bar right-bar"></div>
                </div>
              </div>
            </div>
            <br />
            <div class="label-bar-container">
              <label for="apiContainer" class="button-label" onclick="toggleAPIPanel()">API Keys</label>
              <div class="api-container" id="apiContainer">
                <div class="api-panel hidden">
                  <div class="api-inputs">
                    <div>
                      <label for="api-key-input">OpenAI:</label>
                      <input type="password" id="api-key-input" class="api-input">
                    </div>
                    <div class="google-key-input">
                      <label for="GROQ-api-key-input">GROQ:</label>
                      <input type="password" id="GROQ-api-key-input" class="api-input">
                    </div>
                    <div class="google-key-input">
                      <label for="anthropic-api-key-input">Anthropic:</label>
                      <input type="password" id="anthropic-api-key-input" class="api-input">
                    </div>
                    <div class="google-key-input">
                      <label for="googleApiKey">Google:</label>
                      <input type="password" id="googleApiKey" class="api-input">
                    </div>
                    <div class="google-key-input">
                      <label for="googleSearchEngineId">Search Engine ID:</label>
                      <input type="password" id="googleSearchEngineId" class="api-input">
                    </div>
                    <div class="wolfram-key-input">
                      <label for="wolframApiKey">Wolfram:</label>
                      <input type="password" id="wolframApiKey" class="api-input">
                    </div>
                  </div>

                  <div class="api-buttons">
                    <button class="key-button" onclick="saveKeys()">Save Keys</button>
                    <button class="key-button" onclick="clearKeys()">Clear Keys</button>
                    <button class="key-button" id="saveToFileButton" onclick="saveKeysToFile()">Keys .txt</button>
                    <button class="key-button" id="loadFromFileButton" onclick="loadKeysFromFile()">Load Keys</button>
                  </div>
                </div>
                <div class="toggle-panel" onclick="toggleAPIPanel()" style="padding-top: 15px;">
                  <div class="bar left-bar"></div>
                  <div class="icon-wrapper">
                    <div class="toggle-icon">
                      <!-- Icon SVG -->
                      <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="bar right-bar"></div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div id="tab2" class="tabcontent">
          <!-- Second tab content here -->
          <div class="submenu">
            <div class="label-bar-container">
              <label for="fractalSettingsContainer" class="button-label"
                onclick="toggleFractalSettingsPanel()">Controls</label>
              <div class="fractal-settings-container" id="fractalSettingsContainer">
                <div class="fractal-settings-panel hidden">
                  <div class="settingsSlider centered" style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between;">
                      <label style="white-space: nowrap;">
                        <span id="equation"></span>
                      </label>
                      <div id="julia-constant" style="display: none;">
                        (<span id="julia-x">0.256</span>, <span id="julia-y">0.01</span>)
                      </div>
                      <div class="dropdown-container">
                        <select id="fractal-select" class="model-selector custom-select">
                          <option value="julia">Julia Set</option>
                          <option value="mandelbrot">Mandelbrot</option>
                          <option value="burningShip">Burning Ship</option>
                          <option value="tricorn">Tricorn</option>
                          <option value="buffalo">Buffalo</option>
                          <option value="henon">Henon Map</option>
                          <option value="ikeda">Ikeda Map</option>
                          <!--<option value="inverseMandelbrot">Inverse Brot</option>-->
                        </select>
                      </div>
                    </div>
                    <input id="exponent" type="range" min="1" max="8" value="2">
                  </div>
                  <div class="settingsSlider centered" style="margin-bottom: 10px;">
                    <div style="display:flex; justify-content: space-between;">
                      <div id="quality_value">Quality</div>
                      <div id="fps">fps:?? (is javascript enabled?)</div>
                    </div>
                    <input id="quality" type="range" min="0" max="100" value="16">
                  </div>
                  <div class="gridLayout">

                    <div class="settingsSlider">
                      <label for="length">Length: <span id="length_value"></span></label>
                      <input id="length" type="range" min="0" max="100" value="50">
                    </div>

                    <div class="settingsSlider">
                      <label for="renderWidthMultSlider">Width: <span id="renderWidthMultValue"></span></label>
                      <input type="range" id="renderWidthMultSlider" min="0" max="12" step="0.001">
                    </div>

                    <div class="settingsSlider">
                      <label for="maxLinesSlider">Max Lines: <span id="maxLinesValue"></span></label>
                      <input type="range" id="maxLinesSlider" min="0" max="2048" step="1"
                        title="Set the removal limit for number of lines displayed">
                    </div>

                    <div class="settingsSlider">
                      <label for="regenDebtSlider">Speed: <span id="regenDebtValue"></span></label>
                      <input type="range" id="regenDebtSlider" min="0" max="4" step="0.001">
                    </div>
                    <div class="settingsSlider" title="Set the strength of line generation around your mouse.">
                      <label for="flashlightStrength">Strength: <span id="flashlightStrength_value"></span></label>
                      <input id="flashlightStrength" type="range" min="0" max="1" step="0.001">
                    </div>

                    <div class="settingsSlider" title="Set the radius of line generation around your mouse">
                      <label for="flashlightRadius">Radius: <span id="flashlightRadius_value"></span></label>
                      <input type="range" id="flashlightRadius" min="0" max="1" step="0.001">
                    </div>

                  </div>
                  <!-- Additional fractal settings sliders here -->
                </div>
                <div class="toggle-panel" onclick="toggleFractalSettingsPanel()" style="padding-top: 15px;">
                  <div class="bar left-bar"></div>
                  <div class="icon-wrapper">
                    <div class="toggle-icon">
                      <!-- Icon SVG -->
                      <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="bar right-bar"></div>
                </div>
              </div>
            </div>
            <br />
            <div class="label-bar-container">
              <label for="colorSettingsContainer" class="button-label"
                onclick="toggleColorSettingsPanel()">Color</label>
              <div class="color-settings-container" id="colorSettingsContainer">
                <div class="color-settings-panel hidden">
                  <div id="colorselection">
                    <div class="color-picker-container">
                      <div class="color-picker-item">
                        <label for="rColor">R</label>
                        <input type="color" id="rColor" name="rColor" value="#FF0000">
                      </div>
                      <div class="color-picker-item">
                        <label for="gColor">G</label>
                        <input type="color" id="gColor" name="gColor" value="#00FF00">
                      </div>
                      <div class="color-picker-item">
                        <label for="bColor">B</label>
                        <input type="color" id="bColor" name="bColor" value="#0000FF">
                      </div>
                      <div class="color-picker-item">
                        <label for="colorPicker">BG</label>
                        <input type="color" id="colorPicker" name="colorPicker" value="#000000"
                          style="background:#222226;">
                      </div>
                    </div>
                    <br />
                    <div id="colorsliders">
                      <input type="range" min="0" max="255" id="rSlider" value="0" style="display: none;">
                      <div class="gridLayout">

                        <div class="settingsSlider">
                          <label for="cSlider">Brightness<span id="c_value"></span></label>
                          <input type="range" min="0" max="255" id="cSlider" value="128">
                        </div>

                        <div class="settingsSlider">
                          <label for="sSlider">Saturation<span id="s_value"></span></label>
                          <input type="range" min="0" max="255" id="sSlider" value="127">
                        </div>

                        <div class="settingsSlider">
                          <label for="outer_opacity">Outer Opacity<span id="outer_opacity_value"></span></label>
                          <input id="outer_opacity" type="range" min="0" max="100" value="100">
                        </div>

                        <div class="settingsSlider">
                          <label for="inner_opacity">Inner Opacity<span id="inner_opacity_value"></span></label>
                          <input id="inner_opacity" type="range" min="0" max="100" value="100">
                        </div>

                        <div class="settingsSlider" id="inversion-settings">
                          <!-- Slider for Inversion -->
                          <label for="inversion-slider">Inversion</label>
                          <input type="range" id="inversion-slider" min="0" max="100" value="0">
                        </div>
                        <div class="settingsSlider" id="hue-rotation-settings">
                          <!-- Slider for Hue Rotation -->
                          <label for="hue-rotation-slider">Hue Rotation</label>
                          <input type="range" id="hue-rotation-slider" min="0" max="360" value="0">
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
                <div class="toggle-panel" onclick="toggleColorSettingsPanel()" style="padding-top: 15px;">
                  <div class="bar left-bar"></div>
                  <div class="icon-wrapper">
                    <div class="toggle-icon">
                      <!-- Icon SVG -->
                      <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                  <div class="bar right-bar"></div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div id="tab6" class="tabcontent">
          <div class="submenu">

            <div id="saved-networks-container" class="scrollable-list"></div>
            <div class="top-section">
              <div class="buttons-left">
                <div title="Autosave enabled">
                  <input type="checkbox" id="autosave-enabled" name="autosave-enabled">
                  <label for="autosave-enabled">Autosave</label>
                </div>
                <a id="new-save-button">Save As...</a>
                <a id="clear-button">Clear</a>
                <div id="clear-sure" style="display:none">
                  <a id="clear-unsure-button">no</a>
                  <a id="clear-sure-button">yes</a>
                </div>
              </div>
              <div id="savedCoordinatesContainerTop" class="saved-coordinates-container"></div>
            </div>

            <div id="savedCoordinatesContainer" class="saved-coordinates-container"></div>

            <div class="bottom-section">
              <div id="savedCoordinatesContainerBottom" class="saved-coordinates-container"></div>
              <div class="buttons-right">
                <a id="saveCoordinatesBtn">Store Coordinates</a>
                <a id="deleteCoordinatesBtn">Delete Coordinates</a>
              </div>
            </div>

            <div id="coordinates" class="coordinates-container">
              <div class="coordinate-field">
                <span>pan</span>
                <input id="pan" type="text" value="0+0i" style="background:none; border:none;" size="28" />
              </div>
              <div class="coordinate-field">
                <span>zoom</span>
                <input id="zoom" type="text" value="1" style="background:none; border:none;" size="25" />
              </div>
            </div>
          </div>
        </div>

        <div id="tab3" class="tabcontent">
          <div id="howto" class="howto custom-scrollbar">
            <table>
              <tr>
                <td><strong>AI HOW-TO</strong></td>
                <td><input type="checkbox" id="instructions-checkbox"><label for="instructions-checkbox">Prompt the Ai
                    to explain Neurite</label></td>
              </tr>
              <tr>
                <td><a href="https://github.com/satellitecomponent/Neurite" id="clickable-link">Github Link</a></td>
                <td>Visit our Github for extended documentation.</td>
              </tr>
              <tr>
                <td><strong>CLICK AND DRAG</strong></td>
                <td>Move around the fractal.</td>
              </tr>
              <tr>
                <td>
                  <strong>
                    SCROLL WHEEL
                    <br />PINCH on touchpad
                  </strong>
                </td>
                <td>Zoom in/out.</td>
              </tr>
              <tr>
                <td><strong>SHIFT + DOUBLE CLICK</strong></td>
                <td>Creates a text node</td>
              </tr>
              <tr>
                <td><strong>DOUBLE CLICK</strong></td>
                <td>'Anchor' a window in place.</td>
              </tr>
              <tr>
                <td><strong>SHIFT (hold)</strong></td>
                <td>Freeze Windows</td>
              </tr>
              <tr>
                <td><strong>ALT/Option + SCROLL</strong></td>
                <td>Rotate the view.</td>
              </tr>
              <tr>
                <td><strong>ALT/Option + DRAG</strong></td>
                <td>Allows drag events to pass through node textareas.</td>
              </tr>
              <tr>
                <td><strong>ALT/Option + DOUBLE CLICK</strong></td>
                <td>Creates an ai chat node</td>
              </tr>
              <tr>
                <td><strong>SHIFT + SCROLL</strong></td>
                <td>Resize a window.</td>
              </tr>
              <tr>
                <td><strong>CTRL + CLICK or DRAG</strong></td>
                <td>Selects multiple nodes. Allows for multiple nodes to be re-scaled</td>
              </tr>
              <tr>
                <td>
                  <strong>Local LLM</strong>
                </td>
                <td>Download The LocalHost Servers Folder, then run your own instance of Ollama. More info at <a
                    href="https://github.com/satellitecomponent/Neurite" target="_blank" id="clickable-link">Github</a>
                  or <a href="https://ollama.com/" target="_blank" id="clickable-link">Ollama</a></td>
              </tr>
              <tr>
                <td>
                  <strong>Local Embeddings</strong>
                </td>
                <td>In the Ai tab, check Local Embeddings. The embeddings model will download into your browser cache.
                </td>
              </tr>
              <tr>
                <td><strong>LocalHost Servers</strong></td>
                <td>Wiki, Wolfram, and Webpage Extraction currently require setting up of personal localhosts.<br />
                  More info on our <a href="https://github.com/satellitecomponent/Neurite" target="_blank"
                    id="clickable-link">Github</a><br /> The Ai How-To Checkbox at the top of the instructions will
                  allow the ai to explain basic set-up.</td>
              </tr>
              <tr>
                <td>
                  <button id="clearLocalStorage" class="key-button">Clear Local Storage</button>
                </td>
                <td>
                  <button id="screenshotButton" class="key-button">Screenshot</button>
                  <button id="recordButton" class="key-button">Record</button>
                </td>
              </tr>
            </table>
          </div>
        </div>


      </div>
    </div>
  </div>

  <!-- Nodes -->

  <a id="nodes">
    <!--         Save-Data .txt              -->
  </a>
  <!--iframe id="inlineFrameExample"
            title="Inline Frame Example"
            width="150"
            height="100"
            src="https://m.media-amazon.com/images/M/MV5BOTY2NDY4OGUtYWE0Ni00NWZiLWI3NDktYmE2YWM3Njc3YmRkXkEyXkFqcGdeQXVyMTIxOTU1MjQ3._V1_.jpg">
    </iframe>

    <iframe id="inlineFrameExample"
            title="Inline Frame Example"
            width="768"
            height="512"
            src="https://xkcd.com">
    </iframe>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="red"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="orange"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="yellow"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="green"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="blue"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="purple"/></svg>


    </a-->
  <div id="elements" class="windowbuttons" style="display:none; visibility:hidden;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 2.125" height="16pt">
      <g id="button-delete" transform="scale(0.125 0.125) translate(1 1)">
        <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
        <path d="M 1,1 l 3,0 4,4 4,-4 3,0
 0,3 -4,4 4,4 0,3
 -3,0 -4,-4 -4,4 -3,0
 0,-3 4,-4 -4,-4 0,-3 z" fill="RGB(170,170,170)" stroke="none" />
        <rect x="0" y="0" width="16" height="16" fill="transparent" stroke="none" />
      </g>

      <g id="button-fullscreen" transform="scale(0.125 0.125) translate(21 1)">
        <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
        <path d="M  1, 1 l 3,0 1.5,1.5 -3,0 0,3 -1.5,-1.5 0,-3 z
 M 15, 1 l -3,0 -1.5,1.5 3,0 0,3 1.5,-1.5 0,-3 z
 M 15,15 l -3,0 -1.5,-1.5 3,0 0,-3 1.5,1.5 0,3 z
 M  1,15 l 3,0 1.5,-1.5 -3,0 0,-3 -1.5,1.5 0,3 z
 M  4, 4 l 2,0 1,1 -2,0 0,2 -1,-1 0,-2 z
 M 12, 4 l -2,0 -1,1 2,0 0,2 1,-1 0,-2 z
 M 12,12 l -2,0 -1,-1 2,0 0,-2 1,1 0,2 z
 M  4,12 l 2,0 1,-1 -2,0 0,-2 -1,1 0,2 z
 " fill="RGB(170,170,170)" stroke="none" />
        <rect x="0" y="0" width="16" height="16" fill="transparent" stroke="none" />
      </g>

      <g id="button-collapse" transform="scale(0.125 0.125) translate(41 1)">
        <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
        <circle cx="8" cy="8" r="5.375" stroke="RGB(170,170,170)" stroke-width="2.75" fill="none" />
        <rect x="0" y="0" width="16" height="16" fill="transparent" stroke="none" />
      </g>
    </svg>
  </div>

  <!--icon svgs -->

  <svg style="display: none;">
    <symbol id="note-icon-symbol" viewBox="0 0 20 20">
      <path stroke="#686868" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.7"
        d="M15 17v1a.97.97 0 0 1-.933 1H1.933A.97.97 0 0 1 1 18V5.828a2 2 0 0 1 .586-1.414l2.828-2.828A2 2 0 0 1 5.828 1h8.239A.97.97 0 0 1 15 2M6 1v4a1 1 0 0 1-1 1H1m13.14.772 2.745 2.746M18.1 5.612a2.086 2.086 0 0 1 0 2.953l-6.65 6.646-3.693.739.739-3.692 6.646-6.646a2.087 2.087 0 0 1 2.958 0Z" />
    </symbol>

    <symbol id="ai-icon-symbol" viewBox="0 0 20 18">
      <path stroke="#686868" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.7"
        d="M4.109 17H1v-2a4 4 0 0 1 4-4h.87M10 4.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm7.95 2.55a2 2 0 0 1 0 2.829l-6.364 6.364-3.536.707.707-3.536 6.364-6.364a2 2 0 0 1 2.829 0Z" />
    </symbol>

    <symbol id="link-icon-symbol" viewBox="0 0 19 19">
      <path stroke="#686868" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.7"
        d="M11.013 7.962a3.519 3.519 0 0 0-4.975 0l-3.554 3.554a3.518 3.518 0 0 0 4.975 4.975l.461-.46m-.461-4.515a3.518 3.518 0 0 0 4.975 0l3.553-3.554a3.518 3.518 0 0 0-4.974-4.975L10.3 3.7" />
    </symbol>

    <symbol id="code-icon-symbol" viewBox="0 0 20 16">
      <path stroke="#686868" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.8"
        d="M5 4 1 8l4 4m10-8 4 4-4 4M11 1 9 15" />
    </symbol>

    <symbol id="edges-icon-symbol" viewBox="0 0 18 18">
      <path stroke="#686868" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.7"
        d="m5.953 7.467 6.094-2.612m.096 8.114L5.857 9.676m.305-1.192a2.581 2.581 0 1 1-5.162 0 2.581 2.581 0 0 1 5.162 0ZM17 3.84a2.581 2.581 0 1 1-5.162 0 2.581 2.581 0 0 1 5.162 0Zm0 10.322a2.581 2.581 0 1 1-5.162 0 2.581 2.581 0 0 1 5.162 0Z" />
    </symbol>

    <defs>
      <symbol id="play-icon" viewBox="0 0 24 24">
        <svg class="w-[25px] h-[25px] text-gray-800 dark:text-white" aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16">
          <path stroke="#686868" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.9"
            d="M11 1v14m-8.336-.479 6.5-5.774a1 1 0 0 0 0-1.494l-6.5-5.774A1 1 0 0 0 1 2.227v11.546a1 1 0 0 0 1.664.748Z" />
        </svg>
      </symbol>
      <symbol id="refresh-icon" viewBox="0 0 24 24">
        <svg class="w-[42px] h-[42px] text-gray-800 dark:text-white" aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20">
          <path id="refresh-icon-path" stroke="#686868" stroke-linecap="round" stroke-linejoin="round"
            stroke-width="0.9" d="M16 1v5h-5M2 19v-5h5m10-4a8 8 0 0 1-14.947 3.97M1 10a8 8 0 0 1 14.947-3.97" />
        </svg>
      </symbol>
      <symbol id="pause-icon" viewBox="0 0 24 24">
        <svg class="w-[25px] h-[25px] text-gray-800 dark:text-white" aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 18">
          <path stroke="#686868" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.9"
            d="M1 1.8c0-.442.32-.8.714-.8h1.429c.394 0 .714.358.714.8v14.4c0 .442-.32.8-.714.8H1.714a.678.678 0 0 1-.505-.234A.851.851 0 0 1 1 16.2V1.8Zm7.143 0c0-.442.32-.8.714-.8h1.429c.19 0 .37.084.505.234.134.15.209.354.209.566v14.4c0 .442-.32.8-.714.8H8.857c-.394 0-.714-.358-.714-.8V1.8Z"
            clip-rule="evenodd" />
        </svg>
      </symbol>
      <symbol id="function-button" viewBox="0 0 24 24">
        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
          fill="none" viewBox="0 0 10 12">
          <path stroke="#686868" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.9"
            d="M9 5 5 1 1 5m8 6L5 7l-4 4" />
        </svg>
      </symbol>
      <symbol id="searchSVG" viewBox="0 0 24 24">
        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
          width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path stroke="currentColor" stroke-linecap="round" stroke-width="2.4"
            d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" />
        </svg>
      </symbol>

      <symbol id="plus-icon" viewBox="0 0 24 24">
        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.4"
          d="M12 5v14m-7-7h14" />
      </symbol>

      <symbol id="minus-icon" viewBox="0 0 24 24">
        <path fill="none" stroke="#686868" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.7"
          d="M5 12h14" />
      </symbol>

      <symbol id="delete-icon" viewBox="0 0 24 24">
        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
          width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.4"
            d="M6 6l12 12m0-12L6 18" />
        </svg>
      </symbol>

      <symbol id="gear-icon" viewBox="0 0 24 24">
        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8"
          d="M19.4,12.7a7.59,7.59,0,0,0,.1-1.4,7.59,7.59,0,0,0-.1-1.4l2.1-1.6a0.5,0.5,0,0,0,.1-0.6l-2-3.5a0.5,0.5,0,0,0-.6-.2l-2.5,1A7.59,7.59,0,0,0,13.5,4.2L13,1.8a0.5,0.5,0,0,0-.5-0.4H10a0.5,0.5,0,0,0-.5,0.4L9,4.2a7.59,7.59,0,0,0-2.3.9L4.2,4.1a0.5,0.5,0,0,0-.6.2l-2,3.5a0.5,0.5,0,0,0,.1.6L4,10.3a7.59,7.59,0,0,0-.1,1.4,7.59,7.59,0,0,0,.1,1.4L2,15.7a0.5,0.5,0,0,0-.1.6l2,3.5a0.5,0.5,0,0,0,.6.2l2.5-1a7.59,7.59,0,0,0,2.3.9l0.5,2.4a0.5,0.5,0,0,0,.5.4h3a0.5,0.5,0,0,0,.5-0.4l0.5-2.4a7.59,7.59,0,0,0,2.3-.9l2.5,1a0.5,0.5,0,0,0,.6-.2l2-3.5a0.5,0.5,0,0,0-.1-.6ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z" />
      </symbol>

      <symbol id="eyeball-symbol" viewBox="0 0 24 24">
        <path fill="#8ac6f2" fill-rule="evenodd"
          d="M4.998 7.78C6.729 6.345 9.198 5 12 5c2.802 0 5.27 1.345 7.002 2.78a12.713 12.713 0 0 1 2.096 2.183c.253.344.465.682.618.997.14.286.284.658.284 1.04s-.145.754-.284 1.04a6.6 6.6 0 0 1-.618.997 12.712 12.712 0 0 1-2.096 2.183C17.271 17.655 14.802 19 12 19c-2.802 0-5.27-1.345-7.002-2.78a12.712 12.712 0 0 1-2.096-2.183 6.6 6.6 0 0 1-.618-.997C2.144 12.754 2 12.382 2 12s.145-.754.284-1.04c.153-.315.365-.653.618-.997A12.714 12.714 0 0 1 4.998 7.78ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
          clip-rule="evenodd" />
      </symbol>
      <symbol id="crossed-eyeball-symbol" viewBox="0 0 24 24">
        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8"
          d="M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
      </symbol>
    </defs>
  </svg>

  <svg id="download-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
    style="display: none;">
    <path d="M7,10 L12,15 L17,10" fill="none" stroke="currentColor" stroke-width="2"></path>
    <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"></line>
    <line x1="4" y1="18" x2="20" y2="18" stroke="currentColor" stroke-width="2"></line>
  </svg>

  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#686868" class="bi bi-sliders2"
    viewBox="0 0 16 16" display="none">
    <path fill-rule="evenodd"
      d="M10.5 1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4H1.5a.5.5 0 0 1 0-1H10V1.5a.5.5 0 0 1 .5-.5ZM12 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-6.5 2A.5.5 0 0 1 6 6v1.5h8.5a.5.5 0 0 1 0 1H6V10a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5ZM1 8a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 1 8Zm9.5 2a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V13H1.5a.5.5 0 0 1 0-1H10v-1.5a.5.5 0 0 1 .5-.5Zm1.5 2.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z" />
  </svg>


  <svg id="aiNodeSettingsIcon" display="none" class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
    <path stroke="#686868" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
      d="M7.75 4H19M7.75 4a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 4h2.25m13.5 6H19m-2.25 0a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 10h11.25m-4.5 6H19M7.75 16a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 16h2.25" />
  </svg>


  <svg id="funcErrorIcon" width="20" height="20" style="display: none;"
    class="w-[24px] h-[24px] text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
    fill="none" viewBox="0 0 14 14">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
  </svg>


  <!-- Custom Context Menu Structure -->
  <ul id="customContextMenu" style="display: none; position: absolute;">
    <!-- Dynamic list items will be added here -->
  </ul>

  <svg style="display: none;">
    <defs>
      <symbol id="icon-plus" viewBox="0 0 24 24">
        <path stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7 7V5" />
      </symbol>
      <symbol id="icon-minus" viewBox="0 0 24 24">
        <path stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14" />
      </symbol>
    </defs>
  </svg>

  <!--<script>
        window.onload = function () {
            var input = document.createElement("input");
            input.type = "file";
            if ('webkitdirectory' in input) {
                // If the browser supports directory selection, add the webkitdirectory attribute
                input.setAttribute('webkitdirectory', '');
                input.setAttribute('multiple', '');
            }
            input.id = "fileInput";
            // Append the input field to the body (or any other container you prefer)
            document.body.appendChild(input);
        }
    </script>-->


  <script src="js/globals.js"></script>

  <script src="js/interface/dropdown/savenet.js"></script>

  <script src="js/zettelkasten/zetsyntax.js"></script>
  <script src="js/zettelkasten/zetcodemirror.js"></script>
  <script src="js/zettelkasten/zetplacementstrategy.js"></script>
  <script src="js/zettelkasten/zettelkasten.js"></script>
  <script src="js/zettelkasten/zetpath.js"></script>
  <script src="js/zettelkasten/zetsplitter.js"></script>

  <script src="js/interface/dropdown/customui/customdropdown.js"></script>
  <script src="js/interface/dropdown/customui/togglepanel.js"></script>
  <script src="js/interface/dropdown/customui/custommodal.js"></script>
  <script src="js/interface/dropdown/customui/displaysavedcoords.js"></script>
  <script src="js/interface/dropdown/customui/customsliders.js"></script>
  <script src="js/interface/dropdown/customui/customtooltip.js"></script>


  <script src="js/interface/dropdown/tabs/notestab.js"></script>
  <script src="js/interface/dropdown/tabs/aitab.js"></script>
  <script src="js/interface/dropdown/tabs/datatab.js"></script>
  <script src="js/interface/dropdown/tabs/edittab.js"></script>

  <script src="js/interface/dropdown/dropdown.js"></script>
  <script src="js/ai/ai-utility/handleapikeys.js"></script>



  <script src="js/mandelbrot/mandelbrot.js"></script>
  <script src="js/mandelbrot/updatefractal.js"></script>

  <script src="js/interface/interface.js"></script>
  <script src="js/interface/handledrop.js"></script>


  <script src="js/interface/dropdown/customui/record/record.js"></script>
  <script src="js/interface/dropdown/customui/rightclick/customcontextmenu.js"></script>
  <script src="js/interface/dropdown/customui/rightclick/suggestions.js"></script>

  <script src="js/nodes/nodeutilities.js"></script>

  <script src="js/nodes/nodeinteraction/nodemode.js"></script>
  <script src="js/nodes/nodeinteraction/movenodes.js"></script>
  <script src="js/nodes/nodeinteraction/nodeactioninterface.js"></script>
  <script src="js/nodes/nodeinteraction/connect.js"></script>
  <script src="js/nodes/nodeinteraction/togglenodestate.js"></script>
  <script src="js/nodes/nodeinteraction/filternodes.js"></script>
  <script src="js/nodes/nodeinteraction/bundlecode.js"></script>
  <script src="js/nodes/nodeinteraction/modalconnect.js"></script>
  <script src="js/nodes/nodeinteraction/nodesensor.js"></script>

  <script src="js/nodes/createnodes/window.js"></script>
  <script src="js/nodes/createnodes/createnodes.js"></script>
  <script src="js/nodes/createnodes/nodedef.js"></script>

  <script src="js/nodes/nodeclass.js"></script>
  <script src="js/nodes/edgeclass.js"></script>

  <script src="js/nodes/nodeinteraction/nodestep.js"></script>

  <script src="js/nodes/nodetypes/textnodes/contenteditable.js"></script>
  <script src="js/nodes/nodetypes/textnodes/textnode.js"></script>
  <script src="js/nodes/nodetypes/linknodes/linknode.js"></script>
  <script src="js/nodes/nodetypes/linknodes/importlink.js"></script>
  <script src="js/nodes/nodetypes/imagenodes/imagenode.js"></script>
  <script src="js/nodes/nodetypes/wolframnodes/wolframnode.js"></script>
  <script src="js/nodes/nodetypes/rettamnodes/rettamnode.js"></script>

  <!-- Ai -->

  <script defer type="module" src="/embeddings.js"></script>

  <script src="js/ai/prompts.js"></script>

  <script src="js/nodes/nodetypes/ainodes/responsehandler.js"></script>
  <script src="js/nodes/nodetypes/ainodes/ainode.js"></script>
  <script src="js/nodes/nodetypes/ainodes/ainodemessage.js"></script>

  <script src="js/ai/ai_v2.js"></script>
  <script src="js/ai/aimessage.js"></script>
  <script src="js/ai/ai-utility/aihelpers.js"></script>
  <script src="js/ai/vision.js"></script>

  <script src="js/ai/ollama/ollama.js"></script>
  <script src="js/ai/ollama/ollama-api.js"></script>
  <script src="js/ai/ai-utility/dummyai.js"></script>

  <script src="js/ai/automata.js"></script>
  <script src="js/ai/network.js"></script>

  <!-- <script src="js/aicursor.js"></script>-->
  <script src="js/interface/searchapi/search.js"></script>
  <script src="js/interface/searchapi/searchapi.js"></script>
  <script src="js/interface/searchapi/wikipedia.js"></script>
  <script src="js/interface/searchapi/embeddingsdb.js"></script>
  <script src="js/interface/searchapi/codeparser/parsemirror.js"></script>
  <script src="js/interface/searchapi/codeparser/gitparsed.js"></script>
  <script src="js/interface/searchapi/wolframapi.js"></script>

  <script src="js/interface/neuralapi.js"></script>

  <script src="js/interface/functioncall/functioncallingpanel.js"></script>
  <script src="js/interface/functioncall/neuraltelemetryprompt.js"></script>
  <script src="js/interface/functioncall/requestfunctioncall.js"></script>

</body>

</html>